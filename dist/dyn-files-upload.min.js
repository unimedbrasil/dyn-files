!function(){"use strict";angular.module("dyn.files.upload",["ngFileUpload"])}(),function(){"use strict";angular.module("dyn.files.upload").value("dynUploadConfig",{authUrl:"/"})}(),function(){"use strict";function e(){function e(e,t){var a=e;if(a<=0||isNaN(parseFloat(a))||!isFinite(a))return"Tamanho invÃ¡lido";"undefined"==typeof t&&(t=1),a<=1024&&(a=1024);var r=["Bytes","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(a)/Math.log(1024)),o=(a/Math.pow(1024,Math.floor(n))).toFixed(t);return(o.match(/\.0*$/)?o.substr(0,o.indexOf(".")):o)+" "+r[n]}return e}angular.module("dyn.files.upload").filter("bytes",e)}(),function(){"use strict";function e(e,t,a,r,n){function o(e,t){var a={id:g(),original:e,name:e.name,size:e.size,sizeLoaded:0,status:O.WAITING},r=angular.extend({},t,a);return m.push(r)-1}function u(e,t){e instanceof Array&&e.forEach(function(e){o(e,t)})}function s(){m.length=0}function l(e){for(var t=m.length;t--;){var a=m[t];if(a.id==e.id)return void m.splice(t,1)}}function i(){var e=[];return m.forEach(function(t,a){e.push(d(a))}),a.all(e)}function d(e){var t=a.defer(),r=m[e];return A(r)?U(r,t):t.resolve({file:r}),t.promise}function f(){return m}function c(e){angular.extend(E,{authUrl:e})}function p(e){angular.extend(E,{authUrlResolver:e})}function R(e){angular.extend(E,{authRequestParametersResolver:e})}function h(e){angular.extend(E,{authResponseParametersResolver:e})}function x(e){angular.extend(E,{onUploadedListener:e})}function U(t,a){t.status=O.AUTHORIZING,e.post(E.authUrlResolver?E.authUrlResolver(t):E.authUrl,E.authRequestParametersResolver?E.authRequestParametersResolver(t):{}).then(function(e){t.status=O.AUTHORIZED,t.authorization=e.data.authorization,t.params=e.data.params,t.uploadUrl=e.data.url,E.authResponseParametersResolver&&E.authResponseParametersResolver(e,t),v(t,a)})["catch"](function(e){t.status=O.AUTHORIZE_ERROR,t.errorAuth=e.data?e.data.error:null,a.resolve({response:e,file:t})})}function v(e,t){var a=e.original,n=e.params,o=e.authorization,u=e.uploadUrl,s=r.upload({url:u,data:{file:a,authorization:o,params:n},headers:{"Content-Type":"multipart/form-data"}});s.then(function(a){e.status=O.UPLOADED,E.onUploadedListener&&E.onUploadedListener(e),t.resolve({response:a,file:e})},function(a){e.status!=O.CANCELED&&(e.status=O.UPLOAD_ERROR,t.resolve({response:a,file:e}))},function(t){e.status!=O.CANCELED&&(e.status=O.UPLOADING,e.sizeLoaded=t.loaded,e.sizeTotal=t.total,e.progressPercent=parseInt(100*t.loaded/t.total))}),e.abortUpload=function(){e.status=O.CANCELED,s.abort()}}function A(e){var t=!1;if(e){var a=e.status;t=a==O.WAITING||a==O.AUTHORIZE_ERROR||a==O.UPLOAD_ERROR}return t}function g(){var e=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var a=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?a:3&a|8).toString(16)});return t}var m=[],E={};angular.extend(E,n);var O={WAITING:0,AUTHORIZING:100,AUTHORIZED:110,AUTHORIZE_ERROR:-100,UPLOADING:200,UPLOADED:210,UPLOAD_ERROR:-200,CANCELED:300};return{FILE_STATUS:O,clearFiles:s,uploadOne:d,uploadAll:i,register:o,registerAll:u,unregister:l,getFiles:f,setAuthUrl:c,setAuthUrlResolver:p,setAuthRequestParametersResolver:R,setAuthResponseParametersResolver:h,setOnUploadedListener:x}}angular.module("dyn.files.upload").factory("dynUpload",e),e.$inject=["$http","$log","$q","Upload","dynUploadConfig"]}();